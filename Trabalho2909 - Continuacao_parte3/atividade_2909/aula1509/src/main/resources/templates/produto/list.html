<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br"
      th:replace="~{layout :: layout(~{fragments/head :: head}, ~{::main})}">

<main class="flex-grow-1">
    <div class="container my-4">
        <!-- Card principal -->
        <div class="card shadow-lg border-0">

            <!-- Cabeçalho -->
            <div class="card-header bg-primary text-white text-center py-3">
                <h2 class="mb-0">
                    <i class="bi bi-box-seam me-2"></i>Produtos
                </h2>
            </div>

            <!-- Corpo -->
            <div class="card-body">

                <!-- Botão Novo Produto -->
                <div class="d-flex justify-content-center flex-wrap gap-2 mb-4">
                    <a th:href="@{/produto/novoProduto}" class="btn btn-success">
                        <i class="bi bi-plus-circle me-1"></i> Cadastrar Novo Produto
                    </a>
                </div>

                <!-- Tabela de Produtos -->
                <div class="table-responsive">
                    <table class="table table-hover align-middle text-center mb-0">
                        <thead class="table-primary">
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Descrição</th>
                            <th scope="col">Valor (R$)</th>
                            <th scope="col" colspan="2">Ações</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="p : ${produtos}">
                            <td th:text="${p.id}"></td>
                            <td th:text="${p.descricao}"></td>
                            <td>R$ <span th:text="${#numbers.formatDecimal(p.valor, 2, 'POINT', 2, 'COMMA')}"></span></td>
                            <td>
                                <a th:href="@{/produto/editar/{id}(id=${p.id})}"
                                   class="btn btn-warning btn-sm text-dark">
                                    <i class="bi bi-pencil-square"></i> Editar
                                </a>
                            </td>
                            <td>
                                <a th:href="@{/produto/remover/{id}(id=${p.id})}"
                                   class="btn btn-danger btn-sm"
                                   onclick="return confirm('Tem certeza que deseja excluir este registro?')">
                                    <i class="bi bi-trash"></i> Excluir
                                </a>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(produtos)}">
                            <td colspan="5" class="text-muted fst-italic">
                                Nenhum produto cadastrado.
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>
</html>
