<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br"
      th:replace="~{layout :: layout(~{fragments/head :: head}, ~{::main})}">

<main class="flex-grow-1">
    <div class="container my-4">

        <!-- Card principal -->
        <div class="card shadow-lg border-0">

            <!-- Cabeçalho -->
            <div class="card-header bg-primary text-white text-center py-3">
                <h2 class="mb-0">
                    <i class="bi bi-basket2-fill me-2"></i>Vendas
                </h2>
            </div>

            <!-- Corpo -->
            <div class="card-body">

                <!-- Botão Nova Venda -->
                <div class="d-flex justify-content-center flex-wrap gap-2 mb-4">
                    <a th:href="@{/venda/form}" class="btn btn-success">
                        <i class="bi bi-cart-plus me-2"></i>Nova Venda
                    </a>
                </div>

                <!-- Tabela de Vendas -->
                <div class="table-responsive">
                    <table class="table table-hover align-middle text-center mb-0">
                        <thead class="table-primary">
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Data</th>
                            <th scope="col">Total (R$)</th>
                            <th scope="col">Ações</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="venda : ${vendas}">
                            <td th:text="${venda.id}"></td>
                            <td th:text="${#temporals.format(venda.data, 'dd/MM/yyyy HH:mm')}"></td>
                            <td>
                                R$ <span th:text="${#numbers.formatDecimal(venda.total, 2, 'POINT', 2, 'COMMA')}"></span>
                            </td>
                            <td>
                                <a th:href="@{/venda/detail/{id}(id=${venda.id})}"
                                   class="btn btn-primary btn-sm">
                                    <i class="bi bi-eye"></i> Ver Detalhes
                                </a>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(vendas)}">
                            <td colspan="4" class="text-muted fst-italic">
                                Nenhuma venda encontrada.
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</main>
</html>
